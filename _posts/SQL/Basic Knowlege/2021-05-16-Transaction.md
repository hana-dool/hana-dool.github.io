---
title:  "트렌섹션"
excerpt: "트렌섹션"
categories:
  - SQL_Basic_Knowledge
tags:
  - 1
last_modified_at: 2021-05-09

toc: true
toc_label: "Table Of Contents"
toc_icon: "cog"
toc_sticky: true

use_math: true
typora-root-url: ../../../../hana-dool.github.io
---

# [트렌섹션이란](#link){: .btn .btn--primary}{: .align-center}

> ## Introduction

- 트랜잭션이란 데이터베이스의 DML(삽입, 갱신, 삭제) 와 관련된 논리적인 작업을 말한다.
- 데이터베이스의 데이터 무결성이 보장되는 상태에서 DML 작업을 완수하기 위한 기본 작업 단위이다.
- 다음과 같은 예시를 들어봅시다.

> -잔액이 100만원인 A 계좌가 있다. A계좌에서 B계좌로 10만원을 이체한다고  하자. 그러면 A 계좌에서는 10만원이 빠져나가고 B 계좌에서는 10만원이 더해져야한다. 하지만 계좌 이체 도중에 장애가 생기면 어떻게 해야할까? 어느 계좌에 속하고 있어야 할까?

- 위와 같은 이슈에 대해 필요한 대응 논리가 트랜잭션이다. 
- 일반적으로는 DML 의 실행과 실행에 대한 커밋/롤백까지를 트랜색션이라 하지만 실무에서는 데이터베이스에서 SELECT 문구로 데이터를 조회 / DML 실행 / 종료 까지의 모든 과정을 트랜잭션이라 부른다.

![png](/assets/images/SQL_Basic/11_1.png)

- 특징은 아래와 같다. 

> ## **[트랜잭션(Transaction) 특징(ACID)]**

> **원자성(Atomicity)**

- 트랜잭션 안에 있는 작업은 모두 데이터베이스에 반영되던가 아예 반영되지 않아야 하며 오류, 실패 발생 시 모든 작업은 취소되어야 한다.
- 예를 들어 계좌이체시 오류가 발생하면 반드시 원래 상태로 되돌려야 한다. 중간단계는 존재하면 안 됨.

> **일관성(Consistency)**

- 트랜잭션이 실행을 완료하면 일관성 있는 데이트베이스 상태를 유지한다.
- 시스템의 고정 요소는 수행 전과 수행 완료 후의 상태가 같아야 한다.
- 예를 들어 계좌이체 종료 후 이체받은 계좌의 총액과 이체한 계좌의 총액의 합은 계좌이체 하기 전과 동일해야 한다.

> **독립성(Isolation)**

- 하나의 트랜잭션이 실행 중일 땐 다른 트랜잭션은 대기하여야 하며 실행 중인 트랜잭션이 완전히 종료될 때까지 다른 트랜잭션에서 수행 결과를 참조할 수 없다.
- 개념 설명시 들었던 예 참조.

> **지속성(Durability)**

- 트랜잭션이 완료되면 주기억장치가 아닌 디스크와 같은 보조기억장치에 저장되거나 그렇지 않더라도 영구적으로 반영되야 한다. (트랜잭션이 실행되면 *.ldf파일에, 트랜잭션이 완료(COMMIT)되면 *.mdf파일에 변경이 적용된다)

> ## Transaction 의 상태

![jpg](/assets/images/Program/75_1.jpg){: .align-center}

| **활동(Active)**                   | 트랜잭션이 실행 중에 있는 상태.                              |
| ---------------------------------- | ------------------------------------------------------------ |
| **장애(Failed)**                   | 트랜잭션 실행에 오류가 발생하여 중단된 상태.                 |
| **철회(Aborted)**                  | 트랜잭션이 비정상적으로 종료되어 Rollback 연산을 수행한 상태. |
| **부분 완료(Partially Committed)** | 트랜잭션이 정상 실행 되고 Commit 연산이 실행되기 직전의 상태. |
| **완료(Committed)**                | 트랜잭션이 정상 종료되고 Commit 연산을 실행한 상태.          |

